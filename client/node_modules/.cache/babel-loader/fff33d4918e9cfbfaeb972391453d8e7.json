{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/kasir/OneDrive/Documents/srilatha kasireddy/Quizme-frontend/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/kasir/OneDrive/Documents/srilatha kasireddy/Quizme-frontend/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/kasir/OneDrive/Documents/srilatha kasireddy/Quizme-frontend/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/kasir/OneDrive/Documents/srilatha kasireddy/Quizme-frontend/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/kasir/OneDrive/Documents/srilatha kasireddy/Quizme-frontend/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import Loader from\"react-loader-spinner\";import jwt from\"jsonwebtoken\";import\"./Quiz.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Quiz(){var navigate=useNavigate();var location=useLocation();var quizData=location.state.quizData;var quizId=location.state.quizId;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),quesNumber=_useState2[0],setQuesNumber=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),answers=_useState4[0],setAnswers=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),errorMsg=_useState8[0],setErrorMsg=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var score=0;useEffect(function(){var token=localStorage.getItem(\"token\");if(token){var data=jwt.decode(token);if(!data.email){localStorage.removeItem(\"token\");navigate(\"/login\");}if(Date.now()>jwt.decode(token).exp*1000){localStorage.removeItem(\"token\");navigate(\"/login\");}}else{localStorage.removeItem(\"token\");navigate(\"/login\");}},[]);function handleQuestionChange(event){event.preventDefault();if(event.target.name===\"prev\"&&quesNumber>0){setQuesNumber(quesNumber-1);}if(event.target.name===\"next\"&&quesNumber<quizData.length-1){setQuesNumber(quesNumber+1);}}function handleQuestionSubmit(event){setAnswers(_objectSpread(_objectSpread({},answers),{},_defineProperty({},quesNumber,event.target.name)));}function handleResult(){return _handleResult.apply(this,arguments);}function _handleResult(){_handleResult=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var myScore,req,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:myScore=0;setLoading(true);Object.keys(answers).map(function(answer,index){Object.keys(quizData[index].correct_answers).map(function(correctAnswer){if(quizData[index].correct_answers[correctAnswer]===\"true\"&&answers[answer]+\"_correct\"===correctAnswer){myScore+=1;}});});score=score+myScore;_context.next=6;return fetch(\"http://localhost:5000/api/result\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"x-auth-token\":localStorage.getItem(\"token\")},body:JSON.stringify({quizId:quizId,score:score})});case 6:req=_context.sent;_context.next=9;return req.json();case 9:data=_context.sent;setLoading(false);if(!(data.status===\"ok\")){_context.next=15;break;}navigate(\"/result\",{state:{quizId:quizId}});_context.next=18;break;case 15:setError(true);setErrorMsg(data.message);return _context.abrupt(\"return\");case 18:case\"end\":return _context.stop();}}},_callee);}));return _handleResult.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(Loader,{className:\"loader\",type:\"Grid\",color:\"#fff\",height:100,width:100}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"heading\",children:\"Technical Quiz\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"question-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"question\",children:[quesNumber+1,\". \",quizData[quesNumber].question]}),Object.keys(quizData[quesNumber].answers).map(function(key){if(quizData[quesNumber].answers[key]!==null)return/*#__PURE__*/_jsxs(\"div\",{className:\"option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:key,value:quizData[quesNumber].answers[key],checked:answers[quesNumber]===key,onChange:handleQuestionSubmit}),/*#__PURE__*/_jsx(\"label\",{htmlFor:key,children:quizData[quesNumber].answers[key]})]},key);}),/*#__PURE__*/_jsxs(\"div\",{className:\"btns\",children:[/*#__PURE__*/_jsx(\"button\",{name:\"prev\",onClick:handleQuestionChange,className:\"prev-button\",children:\"Previous\"}),/*#__PURE__*/_jsx(\"button\",{name:\"next\",onClick:handleQuestionChange,className:\"next-button\",children:\"Next\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:errorMsg})]}),quesNumber===quizData.length-1&&/*#__PURE__*/_jsx(\"button\",{className:\"submit-button\",onClick:handleResult,children:\"Submit\"})]})});}export default Quiz;","map":{"version":3,"sources":["C:/Users/kasir/OneDrive/Documents/srilatha kasireddy/Quizme-frontend/client/src/components/Quiz.jsx"],"names":["React","useState","useEffect","useNavigate","useLocation","Loader","jwt","Quiz","navigate","location","quizData","state","quizId","quesNumber","setQuesNumber","answers","setAnswers","error","setError","errorMsg","setErrorMsg","loading","setLoading","score","token","localStorage","getItem","data","decode","email","removeItem","Date","now","exp","handleQuestionChange","event","preventDefault","target","name","length","handleQuestionSubmit","handleResult","myScore","Object","keys","map","answer","index","correct_answers","correctAnswer","fetch","method","headers","body","JSON","stringify","req","json","status","message","question","key"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport \"./Quiz.css\";\r\n\r\nfunction Quiz() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const quizData = location.state.quizData;\r\n  const quizId = location.state.quizId;\r\n  const [quesNumber, setQuesNumber] = useState(0);\r\n  const [answers, setAnswers] = useState({});\r\n  const [error, setError] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  let score = 0;\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      const data = jwt.decode(token);\r\n      if (!data.email) {\r\n        localStorage.removeItem(\"token\");\r\n        navigate(\"/login\");\r\n      }\r\n      if (Date.now() > jwt.decode(token).exp * 1000) {\r\n        localStorage.removeItem(\"token\");\r\n        navigate(\"/login\");\r\n      }\r\n    } else {\r\n      localStorage.removeItem(\"token\");\r\n      navigate(\"/login\");\r\n    }\r\n  }, []);\r\n\r\n  function handleQuestionChange(event) {\r\n    event.preventDefault();\r\n    if (event.target.name === \"prev\" && quesNumber > 0) {\r\n      setQuesNumber(quesNumber - 1);\r\n    }\r\n    if (event.target.name === \"next\" && quesNumber < quizData.length - 1) {\r\n      setQuesNumber(quesNumber + 1);\r\n    }\r\n  }\r\n\r\n  function handleQuestionSubmit(event) {\r\n    setAnswers({ ...answers, [quesNumber]: event.target.name });\r\n  }\r\n\r\n  async function handleResult() {\r\n    let myScore = 0;\r\n    setLoading(true);\r\n    Object.keys(answers).map((answer, index) => {\r\n      Object.keys(quizData[index].correct_answers).map((correctAnswer) => {\r\n        if (\r\n          quizData[index].correct_answers[correctAnswer] === \"true\" &&\r\n          answers[answer] + \"_correct\" === correctAnswer\r\n        ) {\r\n          myScore += 1;\r\n        }\r\n      });\r\n    });\r\n    score = score + myScore;\r\n\r\n    const req = await fetch(\"http://localhost:5000/api/result\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"x-auth-token\": localStorage.getItem(\"token\"),\r\n      },\r\n      body: JSON.stringify({\r\n        quizId: quizId,\r\n        score: score,\r\n      }),\r\n    });\r\n\r\n    const data = await req.json();\r\n    setLoading(false);\r\n    if (data.status === \"ok\") {\r\n      \r\n      navigate(\"/result\", {state:{quizId:quizId}})\r\n    } else {\r\n      setError(true);\r\n      setErrorMsg(data.message);\r\n      return;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {loading ? (\r\n        <Loader\r\n          className=\"loader\"\r\n          type=\"Grid\"\r\n          color=\"#fff\"\r\n          height={100}\r\n          width={100}\r\n        />\r\n      ) : (\r\n        <div>\r\n          <h1 className=\"heading\">Technical Quiz</h1>\r\n          <div className=\"question-form\">\r\n            <div className=\"question\">\r\n              {quesNumber + 1}. {quizData[quesNumber].question}\r\n            </div>\r\n            {Object.keys(quizData[quesNumber].answers).map((key) => {\r\n              if (quizData[quesNumber].answers[key] !== null)\r\n                return (\r\n                  <div className=\"option\" key={key}>\r\n                    <input\r\n                      type=\"radio\"\r\n                      name={key}\r\n                      value={quizData[quesNumber].answers[key]}\r\n                      checked={answers[quesNumber] === key}\r\n                      onChange={handleQuestionSubmit}\r\n                    />\r\n                    <label htmlFor={key}>\r\n                      {quizData[quesNumber].answers[key]}\r\n                    </label>\r\n                  </div>\r\n                );\r\n            })}\r\n            <div className=\"btns\">\r\n              <button\r\n                name=\"prev\"\r\n                onClick={handleQuestionChange}\r\n                className=\"prev-button\"\r\n              >\r\n                Previous\r\n              </button>\r\n              <button\r\n                name=\"next\"\r\n                onClick={handleQuestionChange}\r\n                className=\"next-button\"\r\n              >\r\n                Next\r\n              </button>\r\n            </div>\r\n            {error && <div className=\"error\">{errorMsg}</div>}\r\n          </div>\r\n          {quesNumber === quizData.length - 1 && (\r\n            <button className=\"submit-button\" onClick={handleResult}>\r\n              Submit\r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Quiz;\r\n"]},"metadata":{},"sourceType":"module"}