{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/kasir/OneDrive/Documents/srilatha kasireddy/Quizme-frontend/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/kasir/OneDrive/Documents/srilatha kasireddy/Quizme-frontend/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/kasir/OneDrive/Documents/srilatha kasireddy/Quizme-frontend/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import Loader from\"react-loader-spinner\";import jwt from\"jsonwebtoken\";import\"./Home.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){var _useState=useState(\"Random\"),_useState2=_slicedToArray(_useState,2),category=_useState2[0],setCategory=_useState2[1];var _useState3=useState(\"Easy\"),_useState4=_slicedToArray(_useState3,2),difficulty=_useState4[0],setDifficulty=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),errorMsg=_useState8[0],setErrorMsg=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var navigate=useNavigate();function handleSelect(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;if(name===\"category\"){setCategory(value);}else{setDifficulty(value);}}function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var req,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setLoading(true);_context.next=4;return fetch(\"http://localhost:5000/api/quiz\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"x-auth-token\":localStorage.getItem(\"token\")},body:JSON.stringify({category:category,difficulty:difficulty})});case 4:req=_context.sent;_context.next=7;return req.json();case 7:data=_context.sent;setLoading(false);if(!(data.status===\"ok\")){_context.next=13;break;}navigate(\"/quiz\",{state:{quizId:data.quizId,quizData:data.quizData}});_context.next=17;break;case 13:setError(true);setErrorMsg(data.message);setTimeout(function(){navigate(\"/login\");},1000);return _context.abrupt(\"return\");case 17:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}useEffect(function(){var token=localStorage.getItem(\"token\");if(token){var email=jwt.decode(token);if(!email){localStorage.removeItem(\"token\");navigate(\"/login\");}if(Date.now()>jwt.decode(token).exp*1000){localStorage.removeItem(\"token\");navigate(\"/login\");}}else{localStorage.removeItem(\"token\");navigate(\"/login\");}},[]);function viewHistory(){navigate(\"/history\");}return/*#__PURE__*/_jsx(\"div\",{className:\"home\",children:loading?/*#__PURE__*/_jsx(Loader,{className:\"loader\",type:\"Grid\",color:\"#fff\",height:100,width:100}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"heading\",children:\" Quiz App \"}),/*#__PURE__*/_jsx(\"p\",{className:\"heading2\",children:\"Let's Start a new Quiz\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Select Category\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"select\",{className:\"category\",name:\"category\",value:category,onChange:handleSelect,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Random\",children:\"Random\"}),/*#__PURE__*/_jsx(\"option\",{value:\"linux\",children:\"Linux\"}),/*#__PURE__*/_jsx(\"option\",{value:\"devops\",children:\"DevOps\"}),/*#__PURE__*/_jsx(\"option\",{value:\"docker\",children:\"Docker\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bash\",children:\"Bash\"}),/*#__PURE__*/_jsx(\"option\",{value:\"sql\",children:\"SQL\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cms\",children:\"CMS\"}),/*#__PURE__*/_jsx(\"option\",{value:\"code\",children:\"Code\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"difficulty\",children:\"Select Difficulty\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"select\",{className:\"difficulty\",name:\"difficulty\",value:difficulty,onChange:handleSelect,children:[/*#__PURE__*/_jsx(\"option\",{value:\"easy\",children:\"Easy\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"option\",{value:\"hard\",children:\"Hard\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"start\",type:\"submit\",children:\"Start Quiz\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:errorMsg})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btns\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"logout\",onClick:function onClick(){localStorage.removeItem(\"token\");navigate(\"/login\");},children:\"Logout\"}),/*#__PURE__*/_jsx(\"button\",{className:\"history\",onClick:viewHistory,children:\"View History\"})]})]})});}export default Home;","map":{"version":3,"sources":["C:/Users/kasir/OneDrive/Documents/srilatha kasireddy/Quizme-frontend/client/src/components/Home.jsx"],"names":["React","useState","useEffect","useNavigate","Loader","jwt","Home","category","setCategory","difficulty","setDifficulty","error","setError","errorMsg","setErrorMsg","loading","setLoading","navigate","handleSelect","event","target","name","value","handleSubmit","preventDefault","fetch","method","headers","localStorage","getItem","body","JSON","stringify","req","json","data","status","state","quizId","quizData","message","setTimeout","token","email","decode","removeItem","Date","now","exp","viewHistory"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport \"./Home.css\";\r\n\r\nfunction Home() {\r\n  const [category, setCategory] = useState(\"Random\");\r\n  const [difficulty, setDifficulty] = useState(\"Easy\");\r\n  const [error, setError] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  function handleSelect(event) {\r\n    const { name, value } = event.target;\r\n    if (name === \"category\") {\r\n      setCategory(value);\r\n    } else {\r\n      setDifficulty(value);\r\n    }\r\n  }\r\n\r\n  async function handleSubmit(event) {\r\n    event.preventDefault();\r\n    setLoading(true);\r\n    const req = await fetch(\"http://localhost:5000/api/quiz\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"x-auth-token\": localStorage.getItem(\"token\"),\r\n      },\r\n      body: JSON.stringify({\r\n        category: category,\r\n        difficulty: difficulty,\r\n      }),\r\n    });\r\n\r\n    const data = await req.json();\r\n    setLoading(false);\r\n    if (data.status === \"ok\") {\r\n      navigate(\"/quiz\", {state:{quizId: data.quizId,quizData: data.quizData}})\r\n\r\n   \r\n    } else {\r\n      setError(true);\r\n      setErrorMsg(data.message);\r\n      setTimeout(() => {\r\n        navigate(\r\n          \"/login\",\r\n        );\r\n      }, 1000);\r\n      return;\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      const email = jwt.decode(token);\r\n      if (!email) {\r\n        localStorage.removeItem(\"token\");\r\n        navigate(\"/login\");\r\n      }\r\n      if (Date.now() > jwt.decode(token).exp * 1000) {\r\n        localStorage.removeItem(\"token\");\r\n        navigate(\"/login\");\r\n      }\r\n    } else {\r\n      localStorage.removeItem(\"token\");\r\n      navigate(\"/login\");\r\n    }\r\n  }, []);\r\n\r\n  function viewHistory(){\r\n  navigate(\r\n     \"/history\",\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      {loading ? (\r\n        <Loader\r\n          className=\"loader\"\r\n          type=\"Grid\"\r\n          color=\"#fff\"\r\n          height={100}\r\n          width={100}\r\n        />\r\n      ) : (\r\n        <div>\r\n          <h1 className=\"heading\"> Quiz App </h1>\r\n          <p className=\"heading2\">Let's Start a new Quiz</p>\r\n          <form className=\"form\" onSubmit={handleSubmit}>\r\n            <label htmlFor=\"category\">Select Category</label>\r\n            <br />\r\n            <select\r\n              className=\"category\"\r\n              name=\"category\"\r\n              value={category}\r\n              onChange={handleSelect}\r\n            >\r\n              <option value=\"Random\">Random</option>\r\n              <option value=\"linux\">Linux</option>\r\n              <option value=\"devops\">DevOps</option>\r\n              <option value=\"docker\">Docker</option>\r\n              <option value=\"bash\">Bash</option>\r\n              <option value=\"sql\">SQL</option>\r\n              <option value=\"cms\">CMS</option>\r\n              <option value=\"code\">Code</option>\r\n            </select>\r\n            <br />\r\n            <label htmlFor=\"difficulty\">Select Difficulty</label>\r\n            <br />\r\n            <select\r\n              className=\"difficulty\"\r\n              name=\"difficulty\"\r\n              value={difficulty}\r\n              onChange={handleSelect}\r\n            >\r\n              <option value=\"easy\">Easy</option>\r\n              <option value=\"medium\">Medium</option>\r\n              <option value=\"hard\">Hard</option>\r\n            </select>\r\n            <br />\r\n            <button className=\"start\" type=\"submit\">\r\n              Start Quiz\r\n            </button>\r\n            {error && <div className=\"error\">{errorMsg}</div>}\r\n          </form>\r\n          <div className=\"btns\">\r\n            <button\r\n              className=\"logout\"\r\n              onClick={() => {localStorage.removeItem(\"token\");\r\n              navigate(\"/login\")}}\r\n            >\r\n              Logout\r\n            </button>\r\n            <button className=\"history\" onClick={viewHistory}>View History</button>\r\n            </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}