{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/kasir/OneDrive/Documents/srilatha kasireddy/Quizme-frontend/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/kasir/OneDrive/Documents/srilatha kasireddy/Quizme-frontend/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/kasir/OneDrive/Documents/srilatha kasireddy/Quizme-frontend/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import jwt from\"jsonwebtoken\";import\"./Result.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Result(){var navigate=useNavigate();var location=useLocation();var quizId=location.state.quizId;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),errorMsg=_useState4[0],setErrorMsg=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),score=_useState6[0],setScore=_useState6[1];useEffect(function(){var token=localStorage.getItem(\"token\");if(token){var data=jwt.decode(token);if(!data.email){localStorage.removeItem(\"token\");navigate(\"/login\");}if(Date.now()>jwt.decode(token).exp*1000){localStorage.removeItem(\"token\");navigate(\"/login\");}else{callResultData();}}else{localStorage.removeItem(\"token\");navigate(\"/login\");}},[]);function callResultData(){return _callResultData.apply(this,arguments);}function _callResultData(){_callResultData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var req,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:5000/api/result/\"+quizId,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"x-auth-token\":localStorage.getItem(\"token\")}});case 2:req=_context.sent;_context.next=5;return req.json();case 5:data=_context.sent;if(data.status===\"ok\"){setError(false);setScore(data.score);}else{setError(true);setErrorMsg(data.message);navigate(\"/login\");}case 7:case\"end\":return _context.stop();}}},_callee);}));return _callResultData.apply(this,arguments);}function goBack(){navigate(\"/\");}return/*#__PURE__*/_jsxs(\"div\",{className:\"result\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"heading\",children:\"Here is your Score\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"score\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Your Score is \",score,\" out of 10\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:goBack,children:\"Go To Home Page\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:errorMsg})]});}export default Result;","map":{"version":3,"sources":["C:/Users/kasir/OneDrive/Documents/srilatha kasireddy/Quizme-frontend/client/src/components/Result.jsx"],"names":["React","useState","useEffect","useNavigate","useLocation","jwt","Result","navigate","location","quizId","state","error","setError","errorMsg","setErrorMsg","score","setScore","token","localStorage","getItem","data","decode","email","removeItem","Date","now","exp","callResultData","fetch","method","headers","req","json","status","message","goBack"],"mappings":"udAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,kBAAzC,CACA,MAAOC,CAAAA,GAAP,KAAgB,cAAhB,CACA,MAAO,cAAP,C,wFAEA,QAASC,CAAAA,MAAT,EAAkB,CAChB,GAAMC,CAAAA,QAAQ,CAAGJ,WAAW,EAA5B,CACA,GAAMK,CAAAA,QAAQ,CAAGJ,WAAW,EAA5B,CACA,GAAMK,CAAAA,MAAM,CAAGD,QAAQ,CAACE,KAAT,CAAeD,MAA9B,CACA,cAA0BR,QAAQ,CAAC,KAAD,CAAlC,wCAAOU,KAAP,eAAcC,QAAd,eACA,eAAgCX,QAAQ,CAAC,EAAD,CAAxC,yCAAOY,QAAP,eAAiBC,WAAjB,eACA,eAA0Bb,QAAQ,CAAC,CAAD,CAAlC,yCAAOc,KAAP,eAAcC,QAAd,eAEAd,SAAS,CAAC,UAAM,CACd,GAAMe,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA,GAAIF,KAAJ,CAAW,CACT,GAAMG,CAAAA,IAAI,CAAGf,GAAG,CAACgB,MAAJ,CAAWJ,KAAX,CAAb,CACA,GAAI,CAACG,IAAI,CAACE,KAAV,CAAiB,CACfJ,YAAY,CAACK,UAAb,CAAwB,OAAxB,EACAhB,QAAQ,CAAC,QAAD,CAAR,CACD,CACD,GAAIiB,IAAI,CAACC,GAAL,GAAapB,GAAG,CAACgB,MAAJ,CAAWJ,KAAX,EAAkBS,GAAlB,CAAwB,IAAzC,CAA+C,CAC7CR,YAAY,CAACK,UAAb,CAAwB,OAAxB,EACAhB,QAAQ,CAAC,QAAD,CAAR,CACD,CAHD,IAGO,CACLoB,cAAc,GACf,CACF,CAZD,IAYO,CACLT,YAAY,CAACK,UAAb,CAAwB,OAAxB,EACAhB,QAAQ,CAAC,QAAD,CAAR,CACD,CACF,CAlBQ,CAkBN,EAlBM,CAAT,CARgB,QA4BDoB,CAAAA,cA5BC,oJA4BhB,sKACoBC,CAAAA,KAAK,CAAC,oCAAsCnB,MAAvC,CAA+C,CACpEoB,MAAM,CAAE,KAD4D,CAEpEC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,eAAgBZ,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFT,CAF2D,CAA/C,CADzB,QACQY,GADR,qCASqBA,CAAAA,GAAG,CAACC,IAAJ,EATrB,QASQZ,IATR,eAUE,GAAIA,IAAI,CAACa,MAAL,GAAgB,IAApB,CAA0B,CACxBrB,QAAQ,CAAC,KAAD,CAAR,CACAI,QAAQ,CAACI,IAAI,CAACL,KAAN,CAAR,CACD,CAHD,IAGO,CACLH,QAAQ,CAAC,IAAD,CAAR,CACAE,WAAW,CAACM,IAAI,CAACc,OAAN,CAAX,CACA3B,QAAQ,CAAC,QAAD,CAAR,CACD,CAjBH,sDA5BgB,iDAgDhB,QAAS4B,CAAAA,MAAT,EAAkB,CAChB5B,QAAQ,CAAC,GAAD,CAAR,CACD,CAED,mBACE,aAAK,SAAS,CAAC,QAAf,wBACE,WAAI,SAAS,CAAC,SAAd,gCADF,cAEE,aAAK,SAAS,CAAC,OAAf,wBACE,sCAAkBQ,KAAlB,gBADF,cAEE,eAAQ,OAAO,CAAEoB,MAAjB,6BAFF,GAFF,CAMGxB,KAAK,eAAI,YAAK,SAAS,CAAC,OAAf,UAAwBE,QAAxB,EANZ,GADF,CAUD,CAED,cAAeP,CAAAA,MAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport \"./Result.css\";\r\n\r\nfunction Result() {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const quizId = location.state.quizId;\r\n  const [error, setError] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n  const [score, setScore] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      const data = jwt.decode(token);\r\n      if (!data.email) {\r\n        localStorage.removeItem(\"token\");\r\n        navigate(\"/login\");\r\n      }\r\n      if (Date.now() > jwt.decode(token).exp * 1000) {\r\n        localStorage.removeItem(\"token\");\r\n        navigate(\"/login\");\r\n      } else {\r\n        callResultData();\r\n      }\r\n    } else {\r\n      localStorage.removeItem(\"token\");\r\n      navigate(\"/login\");\r\n    }\r\n  }, []);\r\n\r\n  async function callResultData() {\r\n    const req = await fetch(\"http://localhost:5000/api/result/\" + quizId, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"x-auth-token\": localStorage.getItem(\"token\"),\r\n      },\r\n    });\r\n\r\n    const data = await req.json();\r\n    if (data.status === \"ok\") {\r\n      setError(false);\r\n      setScore(data.score);\r\n    } else {\r\n      setError(true);\r\n      setErrorMsg(data.message);\r\n      navigate(\"/login\");\r\n    }\r\n  }\r\n\r\n  function goBack() {\r\n    navigate(\"/\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"result\">\r\n      <h1 className=\"heading\">Here is your Score</h1>\r\n      <div className=\"score\">\r\n        <p>Your Score is {score} out of 10</p>\r\n        <button onClick={goBack}>Go To Home Page</button>\r\n      </div>\r\n      {error && <div className=\"error\">{errorMsg}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Result;\r\n"]},"metadata":{},"sourceType":"module"}